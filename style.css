// Simulazione database utenti
const users = [];

// Funzione per mostrare una sezione e nascondere le altre
function showSection(sectionId) {
  document.querySelectorAll('section').forEach(section => {
    section.style.display = section.id === sectionId ? 'block' : 'none';
  });
}

// Registrazione utente
document.getElementById('register-form').addEventListener('submit', function (e) {
  e.preventDefault();
  const email = document.getElementById('register-email').value;
  const password = document.getElementById('register-password').value;

  // Controllo se l'utente è già registrato
  if (users.some(user => user.email === email)) {
    alert('Utente già registrato. Prova ad accedere.');
    return;
  }

  // Aggiunta utente al "database"
  users.push({ email, password });
  alert('Registrazione completata! Ora puoi accedere.');
  showSection('login-section');
});

// Passa alla sezione login
document.getElementById('go-to-login').addEventListener('click', function (e) {
  e.preventDefault();
  showSection('login-section');
});

// Passa alla sezione registrazione
document.getElementById('go-to-register').addEventListener('click', function (e) {
  e.preventDefault();
  showSection('register-section');
});

// Login utente
document.getElementById('login-form').addEventListener('submit', function (e) {
  e.preventDefault();
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;

  // Controllo credenziali
  const user = users.find(user => user.email === email && user.password === password);
  if (user) {
    alert('Login riuscito!');
    showSection('tracker-section');
  } else {
    alert('Credenziali errate. Riprova.');
  }
});

// Calcolo giorni e mesi trascorsi
document.getElementById('tracker-form').addEventListener('submit', function (e) {
  e.preventDefault();
  const startDate = new Date(document.getElementById('start-date').value);
  const today = new Date();

  if (startDate > today) {
    alert('La data di inizio gravidanza non può essere nel futuro!');
    return;
  }

  const diffTime = today - startDate;
  const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
  const diffMonths = Math.floor(diffDays / 30);

  const resultText = `Sono trascorsi ${diffDays} giorni (${diffMonths} mesi) dalla data di inizio gravidanza.`;
  document.getElementById('elapsed-time').textContent = resultText;
  document.getElementById('result').classList.remove('hidden');
});

// Logout
document.getElementById('logout').addEventListener('click', function () {
  showSection('login-section');
});
